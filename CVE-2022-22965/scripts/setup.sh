#!/bin/sh
TOMCAT_VERSION=apache-tomcat-9.0.60

echo "Downloading $TOMCAT_VERSION "
curl https://archive.apache.org/dist/tomcat/tomcat-9/v9.0.60/bin/$TOMCAT_VERSION.zip -O -L
unzip $TOMCAT_VERSION.zip
rm -f $TOMCAT_VERSION.zip
chmod +x $TOMCAT_VERSION/bin/catalina.sh

echo "Build project"
./mvnw package

echo "Deploy war"
cp target/spring4shell-example.war $TOMCAT_VERSION/webapps/

echo "start tomcat"
cd $TOMCAT_VERSION
./bin/catalina.sh start